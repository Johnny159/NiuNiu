{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Animations/assets\\Scripts\\Animations\\moneyAnime.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAE1C;IAAwC,8BAAY;IADpD;QAAA,qEA2FC;QAxFW,YAAM,GAAoB,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;;IAwF3D,CAAC;IAtFG,2BAAM,GAAN;QACI,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,eAAe;QACf,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACrC,iBAAiB;QACjB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAE,EAAC,CAAC,EAAE,EAAC;YACrB,IAAI,IAAI,GAAU,MAAM,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;YAClB,IAAG,CAAC,GAAG,EAAE;gBAAE,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;YAC1B,IAAI,GAAG,GAAG,oCAAoC,GAAG,IAAI,CAAC;YACtD,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,GAAG;gBACrC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;YAC9C,CAAC,CAAC,CAAA;SACL;IACL,CAAC;IAGD,mCAAc,GAAd,UAAiB,KAAa,EAAC,KAAa,EAAC,GAAW,EAAE,GAAY,EAAG,OAAgB,EAAE,OAAgB,EAAE,QAAqB,EAAG,KAAkB;QAA1C,yBAAA,EAAA,YAAqB;QAAG,sBAAA,EAAA,SAAkB;QACnJ,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAErD,IAAI,QAAQ,GAAY,EAAE,CAAC,EAAE,CAAC,KAAK,GAAG,OAAO,EAAE,KAAK,GAAG,OAAO,CAAC,CAAC;QAChE,IAAI,MAAM,GAAY,EAAE,CAAC,EAAE,CAAC,GAAG,GAAE,OAAO,GAAC,CAAC,EAAE,GAAG,GAAE,OAAO,GAAC,CAAC,CAAC,CAAC;QAE5D,UAAU;QACV,IAAI,IAAI,GAAG,EAAE,CAAC,aAAa,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QACpE,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC;QACjC,oBAAoB;QACpB,IAAI,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAC5B,YAAY;QACZ,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACxB,IAAI,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5C,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;QACzB,UAAU,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC;QACvC,UAAU,CAAC,WAAW,GAAG,CAAC,CAAC;QAC3B,YAAY;QAGZ,IAAI,QAAgB,CAAC;QACrB,IAAG,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAC;YACrB,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,CAAC;SAC1F;aACG;YACA,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,CAAC;SAC1F;QAED,IAAI,IAAI,GAAG,CAAC,QAAQ,EAAC,QAAQ,EAAC,MAAM,CAAC,CAAC;QACtC,MAAM,GAAG,EAAE,CAAC,QAAQ,CAChB,EAAE,CAAC,IAAI,EAAE;QACT,cAAc;QACd;;;;;;UAME;QACF,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,EAC3B,EAAE,CAAC,IAAI,EAAE,CACZ,CAAA;QACD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAGhC,CAAC;IAED,8BAAS,GAAT,UAAU,IAAW,EAAC,EAAS,EAAC,OAAkB,EAAC,OAAkB,EAAE,mBAA4B;QAAnE,wBAAA,EAAA,WAAkB;QAAC,wBAAA,EAAA,WAAkB;QACjE,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,yCAAyC;QACzC,iCAAiC;QACjC,IAAI,GAAG,GAA6B;YAChC,EAAE,CAAC,EAAG,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAC;YACnB,EAAE,CAAC,EAAG,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,EAAC;YAClB,EAAE,CAAC,EAAG,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAC;YACpB,EAAE,CAAC,EAAG,GAAG,EAAE,CAAC,EAAE,EAAE,EAAC;YACjB,EAAE,CAAC,EAAG,GAAG,EAAE,CAAC,EAAE,GAAG,EAAC,CAAA,UAAU;SAC/B,CAAA;QACD,2FAA2F;QAC3F,+DAA+D;QAC/D,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAG,OAAO,EAAG,OAAO,EAAG,mBAAmB,GAAC,IAAI,GAAG,GAAG,EAAE,GAAG,GAAC,GAAG,GAAC,mBAAmB,CAAC,CAAC;IACvJ,CAAC;IAvFgB,UAAU;QAD9B,OAAO;OACa,UAAU,CA0F9B;IAAD,iBAAC;CA1FD,AA0FC,CA1FuC,EAAE,CAAC,SAAS,GA0FnD;kBA1FoB,UAAU","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Animations","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n@ccclass\r\nexport default class moneyAnime extends cc.Component {\r\n\r\n    private frames:[cc.SpriteFrame] = [new cc.SpriteFrame];\r\n    private curvePos:cc.Vec2[];\r\n    onLoad(){\r\n        let self = this;\r\n        //add component\r\n        self.node.addComponent(cc.Sprite);\r\n        self.node.addComponent(cc.Animation);\r\n        //set spriteframe\r\n        for(let i = 0;i < 12;i++){\r\n            let temp:string = String(i);\r\n            self.frames.pop();\r\n            if(i < 10) temp = \"0\" + i;\r\n            let url = \"Animations/moneyflow/coin1/coin1_0\" + temp;\r\n            cc.loader.loadRes(url, function (err, tex) {\r\n                self.frames.push(new cc.SpriteFrame(tex));\r\n            })\r\n        } \r\n    }\r\n\r\n\r\n    playMoneyAnime ( fromX: number,fromY: number,toX: number, toY : number , xOffset : number, yOffset : number, interval : number = 2 , speed : number = 1) {\r\n        let self = this;\r\n        let animation = self.node.getComponent(cc.Animation);\r\n\r\n        let startPos: cc.Vec2 = cc.v2(fromX + xOffset, fromY + yOffset);\r\n        let endPos: cc.Vec2 = cc.v2(toX+ yOffset/3, toY+ xOffset/3);\r\n        \r\n        //set clip\r\n        let clip = cc.AnimationClip.createWithSpriteFrames(self.frames, 17);\r\n        clip.name = \"anim_run\";\r\n        clip.wrapMode = cc.WrapMode.Loop;\r\n        //set start position\r\n        let action = cc.place(startPos);\r\n        self.node.runAction(action);\r\n        //play anime\r\n        animation.addClip(clip);\r\n        let animeState = animation.play('anim_run');\r\n        animeState.speed = speed;\r\n        animeState.wrapMode = cc.WrapMode.Loop;\r\n        animeState.repeatCount = 5;\r\n        //set action\r\n\r\n\r\n        let midPoint:cc.Vec2;\r\n        if(startPos.y > endPos.y){\r\n            midPoint = cc.v2(endPos.x*(1.2) + startPos.x*(-0.2), startPos.y*(1.5) + endPos.y*-0.5);\r\n        }\r\n        else{\r\n            midPoint = cc.v2(endPos.x*(1.2) + startPos.x*(-0.2), endPos.y*(1.5) + startPos.y*-0.5);\r\n        }\r\n        \r\n        let path = [startPos,midPoint,endPos];\r\n        action = cc.sequence(\r\n            cc.show(),\r\n            //x,y sametime\r\n            /*\r\n            cc.spawn(\r\n                //x y use seperate func\r\n                cc.moveBy(interval , (toX+ yOffset/3) - (fromX + xOffset) , 0).easing(cc.easeQuadraticActionOut()),\r\n                cc.moveBy(interval , 0 , (toY+ xOffset/3) - (fromY + yOffset)).easing(cc.easeSineIn()),\r\n            ),\r\n            */\r\n            cc.bezierTo(interval, path),\r\n            cc.hide()\r\n        )\r\n        self.node.runAction(action);\r\n        \r\n        \r\n    }\r\n\r\n    moneyFlow(from:number,to:number,xOffset:number = 0,yOffset:number = 0, speedAndIntervalVal : number){\r\n        let self = this;\r\n\r\n        //cc.log(\"from \"+fromSeat+\" to \"+toSeat);\r\n        //cc.log(\"from \"+from+\" to \"+to);\r\n        let pos: {x: number, y: number}[] = [\r\n            { x : -418, y: 331},//prepre\r\n            { x : -811, y: 53}, //pre\r\n            { x : -515, y: -324},//me\r\n            { x : 804, y: 44},//next\r\n            { x : 402, y: 336}//nextnext\r\n        ]\r\n        //cc.log(\"from seat \" + from +\"pos \"+ pos[from].x + xOffset + \",\" + pos[from].y + yOffset);\r\n        //cc.log(\"to seat \" + to +\"pos\" + pos[to].x + \",\" + pos[to].y);\r\n        self.playMoneyAnime(pos[from].x,pos[from].y,pos[to].x,pos[to].y , xOffset , yOffset , speedAndIntervalVal*0.01 + 0.5, 1.5+0.5*speedAndIntervalVal);\r\n    }\r\n\r\n    \r\n}\r\n\r\n"]}